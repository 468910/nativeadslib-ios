<!DOCTYPE html>
<html lang="en">
  <head>
    <title>PocketMediaNativeAds  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="PocketMediaNativeAds  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">PocketMediaNativeAds Docs</a> (18% documented)</p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">PocketMediaNativeAds Reference</a>
        <img id="carat" src="img/carat.png" />
        PocketMediaNativeAds  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/AbstractAdUnitTableViewCell.html">AbstractAdUnitTableViewCell</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DataSource.html">DataSource</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/FullscreenBrowser.html">FullscreenBrowser</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MarginAdPosition.html">MarginAdPosition</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NativeAd.html">NativeAd</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NativeAdCell.html">NativeAdCell</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NativeAdStream.html">NativeAdStream</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NativeAdTableViewDataSource.html">NativeAdTableViewDataSource</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NativeAdTableViewDelegate.html">NativeAdTableViewDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NativeAdsRequest.html">NativeAdsRequest</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NativeAdsWebviewDelegate.html">NativeAdsWebviewDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/PocketMediaNativeAdsBundle.html">PocketMediaNativeAdsBundle</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/PredefinedAdPosition.html">PredefinedAdPosition</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/AdUnitType.html">AdUnitType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/EImageType.html">EImageType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/MarginAdPositionError.html">MarginAdPositionError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/PredefinedAdPositionError.html">PredefinedAdPositionError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/UIImageView.html">UIImageView</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UITableView.html">UITableView</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/AdPosition.html">AdPosition</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/DataSourceProtocol.html">DataSourceProtocol</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/NativeAdOpenerDelegate.html">NativeAdOpenerDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/NativeAdTableViewDataSourceProtocol.html">NativeAdTableViewDataSourceProtocol</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/NativeAdsConnectionDelegate.html">NativeAdsConnectionDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/NativeAdsWebviewRedirectionsDelegate.html">NativeAdsWebviewRedirectionsDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/URLSessionProtocol.html">URLSessionProtocol</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structs</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs.html#/s:V20PocketMediaNativeAds12NativeAdInfo">NativeAdInfo</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/NativeAdsConstants.html">NativeAdsConstants</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/NativeAdsConstants.html#/s:VV20PocketMediaNativeAds18NativeAdsConstants6Device">– Device</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/NativeAdsConstants/NativeAds.html">– NativeAds</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs.html#/s:V20PocketMediaNativeAds6sImage">sImage</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <a href='#pocketmedia-ios-nativeads-library' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='pocketmedia-ios-nativeads-library'>PocketMedia: iOS NativeAds library</h1>

<p><a href="https://codeclimate.com/github/Pocketbrain/nativeadslib-ios"><img src="https://codeclimate.com/github/Pocketbrain/nativeadslib-ios/badges/gpa.svg" alt="Code Climate"></a>
<a href="https://travis-ci.org/Pocketbrain/nativeadslib-ios"><img src="https://travis-ci.org/Pocketbrain/nativeadslib-ios.svg?branch=feature%2Fnew-structure-tests" alt="Build Status"></a>
<a href="https://codecov.io/gh/Pocketbrain/nativeadslib-ios"><img src="https://codecov.io/gh/Pocketbrain/nativeadslib-ios/branch/feature%2Fnew-structure-tests/graph/badge.svg" alt="codecov"></a>
<a href="https://gitter.im/Pocketbrain"><img src="https://badges.gitter.im/join_chat.svg" alt="Gitter"></a>
<a href="http://cocoapods.org/pods/PocketMediaNativeAds"><img src="https://img.shields.io/cocoapods/at/PocketMediaNativeAds.svg?maxAge=2592000&amp;style=flat" alt="CocoaPods"></a>
<a href="http://cocoapods.org/pods/PocketMediaNativeAds"><img src="https://img.shields.io/cocoapods/v/PocketMediaNativeAds.svg?maxAge=2592000&amp;style=flat" alt="Version"></a>
<a href="http://cocoapods.org/pods/PocketMediaNativeAds"><img src="https://img.shields.io/cocoapods/l/PocketMediaNativeAds.svg?maxAge=2592000&amp;style=flat" alt="License"></a>
<a href="http://cocoapods.org/pods/PocketMediaNativeAds"><img src="https://img.shields.io/cocoapods/p/PocketMediaNativeAds.svg?maxAge=2592000&amp;style=flat" alt="Platform"></a></p>

<p>This open-source (Swift/Objective-c) library allows developers to easily show ads provided by PocketMedia natively in their apps. While the traditional way of advertising in mobile applications usually involves a disruption in natural user-flow to show the ad (Interstitial ads, banners, etc.) this native solution allows the ads to be integrated in the context where they will be displayed. That in turn makes it less intrusive for the user experience.</p>

<p>The library comes with standard ad units (ways of displaying the ad). You are encouraged to extend/copy these into project and and customize them to your liking, specially to match your application look and feel. This method is called using the adStream - and requires just a few lines of code to start using it.</p>

<p>The alternative solution is using the library to just do the network calls and use the NativeAd (Class) model. Using these core functionalities, you are able to write your own custom ad units and manipulate them in any way that fits your app. This method is called manual integration.</p>
<a href='#requirements' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='requirements'>Requirements</h2>

<p>In order to use the library and have monetization tracking you need to get an advertiser token from Pocket Media. You can get it online, at <a href="http://nativeads.pocketmedia.mobi/signup.html">our sign up page</a>:</p>

<p><a href="http://nativeads.pocketmedia.mobi/signup.html"><img src="https://bitbucket.org/repo/46g5gL/images/3248517185-LandingPage%202016-02-15%2010-19-32.png" alt="LandingPage 2016-02-15 10-19-32.png"></a></p>
<a href='#building-the-demo' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='building-the-demo'>Building the demo</h2>

<p>To run the example project, clone the repo, and run <code>pod install</code> then open the workspace and run the example scheme.</p>

<p>The project is developed in Swift but contains bridging headers to also work with Objective-C.</p>
<a href='#installation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='installation'>Installation</h2>

<p>PocketMediaNativeAds is available through <a href="http://cocoapods.org">CocoaPods</a>. To install
it, simply add the following line to your Podfile:</p>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s2">"PocketMediaNativeAds"</span>
</code></pre>

<p>Then run the following in your terminal:
<code>ruby
pod install
</code></p>
<a href='#troubleshooting' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='troubleshooting'>Troubleshooting</h3>
<a href='#problems-with-doing-a-pod-install' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='problems-with-doing-a-pod-install'>Problems with doing a pod install.</h4>

<p>Try the following:
- gem install bundler
- cd into the project files
- bundle install
Now try it again.</p>
<a href='#usage' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='usage'>Usage</h2>

<p>There are several ways to implement the native ads in your application. Firstly, there is the AdStream which will take care of the integration for you. For maximum customizability however there is always the option to manually integrate the NativeAds.</p>

<p>For both methods the parameters used are:</p>

<ul>
<li>placement token, to be generated in the <a href="http://third-party.pmgbrain.com/">user dashboard</a></li>
<li>delegate, to receive the event callbacks as the ads are ready</li>
</ul>

<p><a href="https://htmlpreview.github.io/?https://github.com/Pocketbrain/nativeadslib-ios/feature/new-structure-tests/docs/index.html">Docs</a></p>
<a href='#adstream' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='adstream'>AdStream</h3>

<p>The Adstream allows to easily show native ads in your UITableView and or UICollectionView.
You can specify the positions by giving an Array with fixed positions or frequency. Simply add the following code in your UIViewController and your ads will be automatically loaded into your view.</p>
<a href='#adstream-ad-margin' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='adstream-ad-margin'>AdStream - Ad margin</h4>
<pre class="highlight swift"><code>    <span class="n">stream</span> <span class="o">=</span> <span class="kt">NativeAdStream</span><span class="p">(</span><span class="nv">controller</span><span class="p">:</span> <span class="k">self</span><span class="p">,</span> <span class="nv">view</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">tableView</span><span class="p">,</span> <span class="nv">adPlacementToken</span><span class="p">:</span> <span class="s">"894d2357e086434a383a1c29868a0432958a3165"</span><span class="p">,</span> <span class="nv">adPosition</span><span class="p">:</span> <span class="kt">MarginAdPosition</span><span class="p">(</span><span class="nv">margin</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nv">adPositionOffset</span><span class="p">:</span> <span class="mi">0</span><span class="p">))</span> <span class="cm">/* replace with your own token!! */</span>
    <span class="n">stream</span><span class="p">?</span><span class="o">.</span><span class="nf">requestAds</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="c1">//Add 5 ads</span>
</code></pre>
<a href='#adstream-fixed-positions' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='adstream-fixed-positions'>AdStream - Fixed positions</h4>
<pre class="highlight swift"><code>    <span class="n">stream</span> <span class="o">=</span> <span class="kt">NativeAdStream</span><span class="p">(</span><span class="nv">controller</span><span class="p">:</span> <span class="k">self</span><span class="p">,</span> <span class="nv">view</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">tableView</span><span class="p">,</span> <span class="nv">adPlacementToken</span><span class="p">:</span> <span class="s">"894d2357e086434a383a1c29868a0432958a3165"</span><span class="p">,</span> <span class="nv">adPosition</span><span class="p">:</span> <span class="kt">PredefinedAdPosition</span><span class="p">(</span><span class="nv">positions</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="nv">adPositionOffset</span><span class="p">:</span> <span class="mi">0</span><span class="p">))</span> <span class="cm">/* replace with your own token!! */</span>
    <span class="n">stream</span><span class="p">?</span><span class="o">.</span><span class="nf">requestAds</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="c1">//Add 5 ads</span>
</code></pre>

<p>There is also the option to pass a custom XIB this has to be or a subclass of the corresponding  AbstractAdUnit for example <code>AbstractAdUnitTableViewCell</code>.
Dont forget to link up the outlets to your xib!</p>
<a href='#manual-integration' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='manual-integration'>Manual Integration</h3>

<p>You could also opt for just using the library to do the network request and manually integrate the ads. To do so create a new delegate class that implements <code>NativeAdsConnectionDelegate</code> and call NativeAdsRequest to initiate an ad request call.</p>
<pre class="highlight swift"><code>    <span class="k">let</span> <span class="nv">adRequest</span> <span class="o">=</span> <span class="kt">NativeAdsRequest</span><span class="p">(</span><span class="nv">adPlacementToken</span><span class="p">:</span> <span class="s">"PLACEMENT_TOKEN"</span><span class="p">,</span> <span class="nv">delegate</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span> <span class="cm">/* replace with your own token!! */</span>
    <span class="n">adRequest</span><span class="o">.</span><span class="nf">retrieveAds</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="c1">//The amount of ads you want to receive.</span>
</code></pre>
<a href='#app-transport-security' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='app-transport-security'>App Transport Security</h2>

<p><strong>Important:</strong> the server to download the ads is <code>http://offerwall.12trackway.com</code>. This is not <em>yet</em> under https, so you will need to add certain values to your plist, to indicate App Transport Security.</p>

<p><img src="https://bitbucket.org/repo/46g5gL/images/2846838342-Info.plist%20%E2%80%94%20Edited%202016-02-21%2018-14-09.png" alt="Info.plist â€” Edited 2016-02-21 18-14-09.png"></p>

<p>In the future this will change to https, following Apple recommendations.</p>
<a href='#receiving-the-results' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='receiving-the-results'>Receiving the results</h3>

<p>After the request has started requesting adds it will call the following three methods to notify the delegate class (the host application) of the ad status:</p>

<ul>
<li><code>didRecieveError</code>: compulsory method, to be invoked in case there is an error retrieving the ads. This can happen due to network conditions, some systems error, parsing error&hellip;</li>
<li><code>didRecieveResults</code>: when the library gets the JSON, parses it and delivers to your app, you will be notified with an Array of the NativeAd objects retrieved.</li>
<li><code>didUpdateNativeAd</code>: not required method. In case some of the ads is modified after it has been delivered, your class will be notified trough this method.</li>
</ul>
<a href='#displaying-the-ads' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='displaying-the-ads'>Displaying the ads</h3>

<p>This is the protocol method invoked when the ads are available. In our example, we add the ads to our datasource and display it:
<code>swift
    func didRecieveResults(nativeAds: [NativeAd]){
        self.nativeAds = nativeAds
        if itemsTable.count &gt; 0 {
            for ad in nativeAds {
                itemsTable.insert(ad, atIndex: Int(arc4random_uniform(UInt32(itemsTable.count))))
            }
            tableView.reloadData()
        }
    }
</code></p>

<p>Together with the method were the table cell is displayed:
&ldquo;`swift</p>
<pre class="highlight plaintext"><code>override func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&gt; UITableViewCell {
    switch itemsTable[indexPath.row] {
    case let item as ItemTableView :
        let cell = tableView.dequeueReusableCellWithIdentifier("ItemCell", forIndexPath:indexPath) as! ItemCell
        cell.name.text = item.title
        cell.descriptionItem.text = item.descriptionItem
        loadImageAsynchronouslyFromUrl(item.imageURL, imageView: cell.artworkImageView)
        return cell
    case let ad as NativeAd :
        let cell = tableView.dequeueReusableCellWithIdentifier("AdCell", forIndexPath:indexPath) as! AdCell
        cell.campaignNameLabel.text = ad.campaignName
        cell.campaignDescriptionLabel.text = ad.campaignDescription

        if(ad.campaignImage != nil){
        loadImageAsynchronouslyFromUrl(ad.campaignImage, imageView: cell.campaignImageView)
        }

        return cell
    default:
        return UITableViewCell()
    }
}
</code></pre>
<pre class="highlight plaintext"><code>
### Opening the URL
When a user clicks on one of the ads it will open a third party link. In other ad solutions this usually creates a bad experience for the user. However this library comes with a solution to circumvent this experience and avoid the user clicking away. Each NativeAd instance comes with a method called ```openAdUrl``` which using the FullScreenBrowser opener creates a smooth transition to the publisher.

```swift
    override func tableView(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath) {
        if let ad = itemsTable[indexPath.row] as? NativeAd{
            print("Opening url: \(ad.clickURL.absoluteString)")
            // This method will take of opening the ad inside of the app, until we have an iTunes url
            ad.openAdUrl(FullscreenBrowser(parentViewController: self))
        }
        tableView.deselectRowAtIndexPath(indexPath, animated: true)
    }
</code></pre>

<p>Alternatively you can use <code>openAdUrlInForeground()</code> to open the URL directly in the browser.</p>
<a href='#look-and-feel' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='look-and-feel'>Look and feel</h2>

<p>One of the main objectives of these project is creating a easy to use library that allowes the ads to be totally customisable. An example of this is the Adstream UITableView example. All you have to provide is an existing UITableView and the placement token and you are good to go!</p>

<p><img src="https://bitbucket.org/repo/46g5gL/images/3807516826-Simulator%20Screen%20Shot%2022%20Jan%202016%2015.26.27.png" alt="Simulator Screen Shot 22 Jan 2016 15.26.27.png"></p>
<a href='#author' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='author'>Author</h2>

<p>Pocket Media Tech Team, <a href="mailto:support@pocketmedia.mobi">support@pocketmedia.mobi</a>. Feel free to contact us for any suggestion improvements you might have.</p>

<p>We work for you, we want you to be able to implement the ads in 5 minutes and start monetizing your audience with a totally native and tailored experience! Tell us what you are missing, what else you need our library to make for you - and it will happen.</p>
<a href='#license' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='license'>License</h2>

<p>PocketMediaNativeAds is available under the MIT license. See the LICENSE file for more info.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2016 <a class="link" href="http://pocketmedia.mobi" target="_blank" rel="external">Pocket Media Support</a>. All rights reserved. (Last updated: 2016-10-17)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.6.3</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
